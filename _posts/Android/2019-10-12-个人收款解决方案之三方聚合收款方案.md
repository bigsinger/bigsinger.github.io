---
layout:		post
category:	"program"
title:		"个人收款解决方案之三方聚合收款方案"
tags:		[收款,微信,支付宝,支付,个人收款]
---
- Content
{:toc}
**关键词**：签约支付，签约收款，支付宝收款，个人签约收款



# 背景

​	有做网赚或者在网上售卖个人小产品小服务的，需要进行收款，如果零星个别的收款可能直接走个人转账然后手动发货即可，但是一旦流程标准下来，量走起来之后，付款发货就需要自动化了，以提高人效。例如在网站上挂一个购买链接，用户点击后自动展示收款码，用户扫码付款后网站自动完成发货，是不是感觉很好？或者在APP里提供了付费功能，用户需要购买的时候，能够直接弹出支付宝（或微信）付款，完成付款后自动提供付费功能，是不是感觉很好？

​	本方案场景是针对「个人开发者」或其他「个人商家」的，后面简称**个人收款**方案。对于已经拥有公司的，直接签约支付宝或微信的支付功能即可。

​	个人收款总结下来有两类：**签约**和**免签约**。

- **签约方案**就是直接和支付宝或者微信签约，严格按照支付宝或微信的要求一步步来，完成签约后使用它们的官方接口即可。该方案比较稳定，但是如果售卖的商品属于灰色的话，很容易被「风控」禁用，毕竟使用的是人家的服务，很容易被管控。早期的时候可以直接个人签约，但是后来就不行了，个人必须用营业执照才行。
- **免签约方案**就是避开使用支付宝或微信的签约流程，自己搭建一套支付收款体系，这个前面一篇文章中介绍过了。



​	网上有很多集成了收款方案做的**聚合收款方案**，大家可以了解，但是这些大多是属于不正规的个人或小团队搭建的，因为涉及到资金汇款，这个风险很高，不建议实际使用。截止到目前为止，以前做调研收集到的一些网站已经打不开了，收集了一些权当做了解、借鉴、参考，以后有见到会继续汇总收集。



# 三方聚合收款方案

## 芝麻收款码合并-将微信支付宝二维码合并为一个收款二维码

https://www.hotapp.cn/shouqian



## 收款啦-QQ支付宝微信收款码三合一

方案源码https://github.com/iAJue/qr，演示网址：https://qr.moeins.cn/，已失效。但是这个思路可以学习。



所谓二维码，其实就是包含了一系列字符串的图片罢了。无论是支付宝还是微信的收款码，其本质上是一个包含了收款链接的二维码。思路是：检测如果是支付宝浏览页面，就给出支付宝的付款链接、如果是微信，就给出微信链接……



这里涉及到一个知识点，**User-Agent**,大厂的webview都会携带自家的UA信息，比如说：

| 厂家   | User-Agent                                                   |
| ------ | ------------------------------------------------------------ |
| QQ     | MQQBrowser/6.2 TBS/043221 Safari/537.36 QQ/7.0.0.3135        |
| 微信   | MQQBrowser/6.2 TBS 043220 Safari/537.36 MicroMessenger/6.5.8.1060 NetType/4G Language/zh_CN |
| 支付宝 | UCBrowser/11.5.0.939 UCBS/2.10.1.6 Mobile Safari/537.36 AliApp(AP/10.0.15.051805) AlipayClient/10.0.15.051805 Language/zh-Hans |

这样就很轻松区分是QQ还是微信还是支付宝扫码了：

- User-Agent 含有 QQ/ 为QQ
- User-Agent 含有 MicroMessenger 为微信
- User-Agent 含有 AlipayClient 为支付宝



​	可以通过自建一个网址，通过二维码生成扫描这个网址后，判断浏览器的UA，来分发不同的收款码。大致的流程则为：客户端扫码 -> 服务端根据 User-Agent 判断客户端类型 -> 分别返回不同的处理

另外值得注意的是：

- QQ：https 协议，无法唤醒QQ
- 支付宝：https 协议，可直接唤醒支付宝 APP
- 微信：微信自己的支付协议，无法唤醒微信



## 其他

- 借助有赞：该方案受有赞平台管制，很容易失效，不推荐，仅分享思路。

- https://pay.xu42.cn/

- [微信支付 支付宝免签约支付实现方法 个人微信支付 个人支付宝接口](https://segmentfault.com/a/1190000022064367)
  - [微信监听支付](http://www.liketube.cn/test/wx_pay/pay.php)
  - [支付宝监听支付](http://www.liketube.cn/test/wx_pay/alipay.php)
  - [工行e支付监听支付](http://www.liketube.cn/test/wx_pay/ghpay.php)

- [H5支付 - 真正的个人微信支付宝即时到账H5支付接口](https://h5zhifu.com/)