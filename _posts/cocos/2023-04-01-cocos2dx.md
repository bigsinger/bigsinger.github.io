---
layout:		post
category:	"cocos"
title:		"cocos2dx使用汇总备查"

tags:		[c++]
---
- Content
{:toc}
- 下载：[Cocos Creator - 高效轻量的跨平台3D/2D图形引擎](https://www.cocos.com/creator)
- 文档：[Cocos Creator 用户手册](https://docs.cocos.com/creator/manual/zh/)
- 视频：[Cocos Creator 官方 YouTube 频道](https://www.youtube.com/c/CocosCreator/videos)
- 资源：[awesome-CocosCreator: Cocos Creator 游戏资源合集](https://github.com/Leo501/awesome-CocosCreator)



# 环境配置

官方的安装编译环境要求：[Build Requirements - cocos2d-x](https://docs.cocos.com/cocos2d-x/manual/en/installation/prerequisites.html?h=require)

- 下载解压 [cocos2d-x 3.17.2](https://digitalocean.cocos2d-x.org/Cocos2D-X/cocos2d-x-3.17.2.zip) ，并把`X:\cocos2d-x-3.17.2\tools\cocos2d-console\bin` 设置到环境变量`Path`中，使得可以直接使用`cocos`命令。如果未设置到环境变量中，使用绝对路径也可以。

- Python 2.7.5+, **Python 2,7.10 reccomended**, **NOT Python 3+**

  - 安装[Python2](https://www.python.org/downloads/release/python-2718/)，并设置Python安装路径到环境变量`Path`中，使得直接使用`python`命令能够调用到该Python2。

- NDK r91c+ is required to build Android games (tested with r19c) **May be called 19.2.xx from within Android Studio**

  - [NDK 下载  -  Android NDK  -  Android Developers](https://developer.android.google.cn/ndk/downloads?hl=zh-cn)
  - [NDK 历史版本下载 - GitHub](https://github.com/android/ndk/wiki/Unsupported-Downloads)

- Android Studio 3.4+ to build Android games (tested with 3.0)。 也可以不安装，不影响使用命令行打包。

  - [下载 Android Studio 和应用工具](https://developer.android.google.cn/studio?hl=zh-cn)

- [Java8 Downloads - Oracle](https://www.oracle.com/java/technologies/downloads/#java8-windows)  [download java from oracle without login](https://gist.github.com/wavezhang/ba8425f24a968ec9b2a8619d7c2d86a6?permalink_comment_id=4888806)

- 安装。执行：`python setup.py`，主要是按照提示设置两个路径：`NDK`路径和`AndroidSDK`路径，设置好后重新打开控制台终端。

- 创建新项目：`cocos new HelloWorld -p com.xx.yy -l lua -d F:\CocosProjects`  ，提示是否同意发送数据时，可以选择N（不同意。）

- 运行项目

  - Windows版本：`VisualStudio`打开`\frameworks\runtime-src\proj.win32` 目录下的`sln`文件即可。

  - Android版本：进入`frameworks\runtime-src\proj.android`文件夹，运行如下命令：

    ```bash
    cocos run -p android
    ```

    待`gradle`相关配置更新或下载完成，运行至真机/模拟器查看效果。或者直接用AndroidStudio打开`frameworks\runtime-src\proj.android`



错误解决

```
cvc-complex-type.2.4.a: 发现了以元素 'base-extension' 开头的无效内容。应以 '{layoutlib}' 之一开头。
```

解决方案：

最简单的是升级Gradle：

```groovy
// gradle-wrapper.properties 文件
distributionUrl=https\://services.gradle.org/distributions/gradle-7.2-all.zip
```

```groovy
// build.gradle 文件
classpath 'com.android.tools.build:gradle:4.2.2'
```





# 参考资料

- [Cocos2d-x 用户手册](https://docs.cocos.com/cocos2d-x/manual/zh/)
- [cocos2d-x GitHub源码](https://github.com/cocos2d/cocos2d-x)
- [Cocos中文社区](https://forum.cocos.org)
- [Cocos 资料大全](https://fusijie.github.io/Cocos-Resource/index.html)