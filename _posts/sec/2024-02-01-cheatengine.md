---
layout:		post
category:	"sec"
title:		"CE-CheatEngine使用汇总记录"

tags:		[]
---
- Content
{:toc}
# 内存地址

## 谁读谁写

CE中对地址进行搜索，主要是想知道数据的相对偏移，或者地址的地址。主要方法：搜索到数据后，添加地址到列表，右键使用功能：

- 找出是什么访问了这个地址（是什么改写了这个地址）
- 对这个地址进行指针扫描



## object对象基址

通过指针及`offset` 找到基址后，在结构分析窗口中，选择菜单 文件-**添加额外的地址** ，**然后根据基址中的地址展开来看数据结构 可以找到很多信息**

[How To Find Offsets, Entity Addresses & Pointers](https://www.youtube.com/watch?v=YaFlh2pIKAg) 



## 增加减少相对大小

例如CE找人物坐标找敌人坐标：

- 先找Y坐标，人物上上下下，不断搜索减少或者增加的数值，确定Y坐标后，X坐标基本都是挨着的。
- 敌人固定不动，自己上下动，找相对大小的数值。



## 锁定筛选

CE批量锁定或修改进行筛选。N次扫描后结果仍然很多，可以批量导入到下面地址列表，利用二分法进行批量锁定（多选后按空格键锁定），不是的地址删除之，逐步缩小范围找到内存地址。

## 组合

变了，不变，大了还是小了。

# 基础操作

## 内存搜索

- 二进制数据（字节数组）搜索：勾选Hex，搜索类型：Search for this array ， 值类型：Array of byte ， 搜索内容填写示例：`30 20 31 20 20 32 32 20 `

## 锁定数值

- 点地址列表前面复选框锁定数值（或者右键后选择**锁定选中的地址** Toggle selected Records），或者按下空格键。

# 教程练习

CE目录下的`Tutorial-i386.exe`就是练习用的程序。



## Step6 二级指针（地址的地址 含offset偏移量）

**方法1：访问/修改内存的指令**

1. 搜索到地址后，查看谁访问或修改了数值。

2. 改变数值后，会输出一些访问/修改了数值的汇编列表。

3. 逐个双击查看汇编，检查程序猜测的地址是否和内存地址一致，不一致的排除，一致的继续分析汇编指令。分析中括号里的表达式，来找offset，并计算出offset值。例如汇编如下：

   ```assembly
   10002D142 - mov rdx, [100325AD0]
   10002D14C - mov [rdx], eax
   ```

   则 100325AD0 就是我们想要找的内存地址，offset是0。如果是`mov [rdx + 0x10], eax` ，则offset就是0x10，如果是 `[EAX*2+EDX+00000310] eax=4C and edx=00801234.`，则 edx 就是地址，其他的表达式加起来就是offset，也即 `EAX*2+00000310` ，这个时候要看EAX寄存器的数值是多少，自己计算出最终的offset。

4. 回到CE主界面，手动添加内存地址。填上 `100325AD0`  ，注意勾选 `Pointer`，并填上偏移量`offset`的值。这样地址列表会出现：`P->016D9710`类似这样的项，就是地址的地址。



**方法2：搜索指针地址**

该方法很强大，非常适合**多级指针**地址搜索。

1. 先通过数值搜索找到数值的内存地址，例如：01628BC0 ，添加到地址列表。
2. 对 01628BC0 这个地址右键进行 `Pointer scan for this address`，弹出的对话框大部分选项默认。`Pointers must end with specific offsets` 不勾选，也就是说我们也不知道偏移量是多少。Max level 第一次搜索可以设置为1，如果搜索不到后面可以逐渐增加1进行搜索。确定后，弹出需要保存的文件，随便填个就行。
3. 搜索片刻便有结果，如果搜索结果不理想，可以在上面一部的选项参数做适当调整再搜索。搜索到的结果直接双击即可添加到地址列表。
4. 如果搜索结果有多条，可以让数据发生变化进行观察排除。

# 其他练习

- 植物大战僵尸

```
修改植物攻击速度 攻击力
无限种植
修改阳光
解锁植物
解锁迷雾
自动拾取阳光 拾取时对阳光数有修改 结合回溯方法找到call
植物无冷却
卡片槽全满
```

- 搜索系统进城里Windows登录密码
- 搜索邮箱、聊天软件里的信息

# 参考

- [CE官网](https://www.cheatengine.org/)
- [CE修改器使用教程 [入门篇]](https://www.cnblogs.com/LyShark/p/10799926.html)
- 
