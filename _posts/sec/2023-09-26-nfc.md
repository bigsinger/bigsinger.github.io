---
layout:		post
category:	"sec"
title:		"手机NFC模拟门禁卡知识汇总"

tags:		[]
---
- Content
{:toc}


# 卡片分类

- **M1卡**：全称Mifare classic 1K，普通IC卡，0扇区不可修改，其他扇区可以反复擦写。通常我们使用的门禁卡、电梯卡都是M1卡。M1卡是NXP（恩智浦半导体）公司研发的IC卡，执行标准是ISO/IEC14443 Type A，读写频率是13.56MHz。目前大多数手机厂商使用的NFC芯片都是NXP，另一部分则是BRCM（博通）方案，均执行同一标准，这是手机读写M1卡的技术基础。
- **UID卡**：普通复制卡，可以反复擦写所有扇区，门禁有防火墙则失效。
- **CUID：**升级复制卡，可以反复擦写所有扇区，可以穿透大部分防火墙。
- **FUID：**高级复制卡，0扇区只能写入一次，写入后变为M1卡。
- **UFUID：**超高级复制卡，0扇区只能写入一次，封卡后变为M1卡，不封卡变为UID卡。



可以发现，如果要复制卡，购买**CUID**卡较好，CUID卡是针对UID卡做的优化。UID卡出现的比较早，会响应后门指令，可被使用后门指令检测是否为克隆卡的机器发现，而CUID卡不会响应，一般可绕过读卡器防火墙。

我之前批发的几毛钱一片的是M1卡，0扇区不能修改，所以不能用来复制卡，只能作为标签卡使用。

# 扇区数据

卡片的扇区数据大概说下，一共是4个扇区（索引从0开始），每个扇区有4块，一般的读写软件显示的时候是一行显示一块的数据。

![](https://pic2.zhimg.com/v2-828aacdf03f7bd6d15c9a8f565287421_r.jpg)

# CUID卡

之前遇到华为Mate30手机NFC的问题，参见[华为Mate30手机NFC功能异常的解决办法 — 朱皮特的烂笔头](https://zhupite.com/android/huawei-mate30-nfc.html)，想着用CUID卡来解决，网上大概了解了下价格，一片在2元左右，有一些特别说明：

1. 芯片贴不可以直接贴在金属或者手机表面。
2. 如果需要贴在金属或手机表面，需添加吸波片（防磁贴），在购买时可选择配套吸波片(防磁贴) 的链接。
3. 芯片贴厚度和一张纸差不多，吸波片(防磁贴) 厚度大约0.12毫米，两者叠加后放在普通塑料手机壳内可使用，非普通塑料材质或者有特殊造型的手机壳可能会影响芯片贴的正常工作。
4. 芯片贴一面有背胶，可以粘贴在木制、玻璃、塑料等材质表面，也可放在自制的滴胶挂件、玩具、毛绒公仔内。
5. 芯片贴如果要更换黏贴地方，可以轻轻撕下来，只要天线和芯片没有损坏，就可以继续使用。



CUID芯片贴说明：

- 使用说明：0扇区可修改,可复制其他IC门禁卡可写入文本、电子名片、电子说明书、链接、指令等等。
- 标签尺寸：圆形，直径 25 mm
- 芯片容量：1024个字节，约400-500个汉字
- 感应距离：1~3 cm，主要由读取设备决定
- 编辑软件：复制IC门禁卡可使用MCTapp等，写入信息指令可使用标签助手等
- 注意事项
  1. 普通IC门禁卡可使用有NFC功能的安卓手机+MCTapp进行复制
  2. 加密IC门禁卡需使用专业设备进行复制
  3. 可像213 /215/216芯片贴一样写入各类信息和指令
  4. 贴在金属表面或手机背面时需加装吸波片以防电磁干扰



要解决问题，就是买一张带有吸波片的CUID卡进行复制，然后贴到手机壳上。至于更多知识点遇到的时候再看吧。

# 参考

- [由门禁卡来谈谈IC/ID复制卡的原理和知识](https://zhuanlan.zhihu.com/p/654587508)
- [华为手机NFC模拟加密的门禁卡详细教程_华为手机nfc模拟加密门禁卡教程](https://blog.csdn.net/a1318321/article/details/105141863)
- [手机NFC模拟M1门禁卡、写CUID白卡的一些研究记录](https://cloud.tencent.com/developer/article/2032581)
